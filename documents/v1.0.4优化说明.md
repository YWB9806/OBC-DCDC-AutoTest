# v1.0.4 优化说明

## 发布日期
2025-12-14

## 版本类型
功能增强版本（Feature Release）

---

## 🎉 新增功能

### 1. 自定义脚本路径支持

**问题描述**：
- 之前版本只能识别 `TestScripts/` 目录下的脚本
- 用户无法添加其他位置的脚本文件或文件夹
- 限制了软件的灵活性和使用场景

**解决方案**：
- ✅ 在脚本浏览器中添加"添加路径"按钮
- ✅ 支持添加单个Python脚本文件
- ✅ 支持添加整个文件夹（自动扫描其中的所有Python脚本）
- ✅ 自定义路径的脚本与默认路径脚本统一管理
- ✅ 自动验证脚本有效性

**使用方法**：

1. **添加单个脚本文件**：
   - 点击"添加路径"按钮
   - 选择"添加单个脚本文件"
   - 浏览并选择 .py 文件
   - 脚本将出现在脚本列表中

2. **添加整个文件夹**：
   - 点击"添加路径"按钮
   - 选择"添加整个文件夹"
   - 浏览并选择包含脚本的文件夹
   - 系统自动扫描并添加所有Python脚本

**优势**：
- 🎯 不再局限于特定目录
- 🎯 可以添加任意位置的脚本
- 🎯 支持多个不同位置的脚本集合
- 🎯 提高了软件的灵活性和实用性

---

### 2. 应用程序图标

**问题描述**：
- 软件窗口使用系统默认图标
- 缺乏品牌识别度
- 在任务栏中不易识别

**解决方案**：
- ✅ 添加自定义应用程序图标
- ✅ 使用 `resources/app图标.png` 作为窗口图标
- ✅ 自动检测图标文件是否存在
- ✅ 图标加载失败时记录日志但不影响程序运行

**效果**：
- 🎨 窗口标题栏显示自定义图标
- 🎨 任务栏显示自定义图标
- 🎨 Alt+Tab 切换时显示自定义图标
- 🎨 提升软件专业度和识别度

---

### 3. 手动检查更新

**问题描述**：
- 之前版本在启动后3秒自动检查更新
- 用户无法控制更新检查时机
- 可能在不方便的时候弹出更新提示

**解决方案**：
- ✅ 移除启动时的自动更新检查
- ✅ 在"帮助"菜单添加"检查更新"选项
- ✅ 用户可以主动选择何时检查更新
- ✅ 支持快捷键 F12 快速检查更新

**使用方法**：
- 通过菜单：帮助(H) -> 检查更新(U)
- 通过快捷键：按 F12 键

**优势**：
- 👤 用户体验更好，不会被打断
- 👤 用户可以自主决定何时检查更新
- 👤 减少不必要的网络请求
- 👤 更符合用户习惯

---

## 📝 修改的文件

### 1. AppCode/ui/script_browser.py
- 添加"添加路径"按钮
- 实现自定义路径添加功能
- 更新脚本加载逻辑

### 2. AppCode/ui/main_window.py
- 添加窗口图标加载逻辑
- 在帮助菜单添加"检查更新"选项
- 移除自动更新检查
- 优化关于对话框

### 3. 安全相关文件
- documents/密码安全管理指南.md（新增）
- documents/部署指南.md（更新）
- CHANGELOG.md（更新）
- init_admin_user.py（更新）
- AppCode/services/user_service.py（更新）

---

## 🚀 升级指南

### 从 v1.0.3 升级到 v1.0.4

```bash
# Git 更新
git pull origin main
git checkout v1.0.4
python run.py
```

---

## ✅ 测试建议

### 1. 测试自定义路径功能
1. 启动应用并登录
2. 点击"添加路径"按钮
3. 测试添加单个文件和文件夹
4. 验证脚本正确显示和执行

### 2. 测试应用程序图标
1. 确保 resources/app图标.png 存在
2. 启动应用
3. 检查窗口和任务栏图标显示

### 3. 测试手动更新检查
1. 启动应用，验证不自动弹出更新
2. 使用菜单或 F12 检查更新
3. 验证更新对话框正常工作

---

## 🐛 已知问题

### 自定义路径持久化
- 当前版本的自定义路径在应用重启后会丢失
- v1.0.5 将添加持久化存储功能

---

## 📞 反馈与支持

- **查看日志**：`logs/app_*.log`
- **提交 Issue**：https://github.com/YWB9806/OBC-DCDC-AutoTest/issues

---

**感谢使用 Python脚本批量执行工具！**

**版本**：v1.0.4  
**发布日期**：2025-12-14  
**维护者**：YWB9806