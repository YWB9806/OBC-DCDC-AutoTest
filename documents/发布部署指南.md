# Pythonè„šæœ¬æ‰¹é‡æ‰§è¡Œå·¥å…· - å‘å¸ƒéƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç‰ˆæœ¬ç®¡ç†](#ç‰ˆæœ¬ç®¡ç†)
2. [æœ¬åœ°æ‰“åŒ…](#æœ¬åœ°æ‰“åŒ…)
3. [è‡ªåŠ¨å‘å¸ƒæµç¨‹](#è‡ªåŠ¨å‘å¸ƒæµç¨‹)
4. [æ‰‹åŠ¨å‘å¸ƒæµç¨‹](#æ‰‹åŠ¨å‘å¸ƒæµç¨‹)
5. [æ›´æ–°æ£€æŸ¥é…ç½®](#æ›´æ–°æ£€æŸ¥é…ç½®)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## 1. ç‰ˆæœ¬ç®¡ç†

### 1.1 ç‰ˆæœ¬å·è§„èŒƒ

æœ¬é¡¹ç›®é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼ˆSemantic Versioningï¼‰ï¼š`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·`

- **ä¸»ç‰ˆæœ¬å·ï¼ˆMajorï¼‰**ï¼šä¸å…¼å®¹çš„APIä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·ï¼ˆMinorï¼‰**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·ï¼ˆPatchï¼‰**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

ç¤ºä¾‹ï¼š
- `1.0.0` - é¦–ä¸ªç¨³å®šç‰ˆæœ¬
- `1.1.0` - æ–°å¢åŠŸèƒ½
- `1.1.1` - ä¿®å¤bug
- `2.0.0` - é‡å¤§æ›´æ–°ï¼Œå¯èƒ½ä¸å…¼å®¹æ—§ç‰ˆæœ¬

### 1.2 æ›´æ–°ç‰ˆæœ¬å·

ç¼–è¾‘ `version.py` æ–‡ä»¶ï¼š

```python
__version__ = "1.1.0"  # æ›´æ–°ç‰ˆæœ¬å·
__version_info__ = (1, 1, 0)  # æ›´æ–°ç‰ˆæœ¬å…ƒç»„

VERSION = {
    "major": 1,
    "minor": 1,
    "patch": 0,
    "build": 0,
    "release_date": "2025-12-13",  # æ›´æ–°å‘å¸ƒæ—¥æœŸ
    "release_type": "stable"  # stable, beta, alpha
}
```

### 1.3 æ›´æ–°åº”ç”¨ä¿¡æ¯

å¦‚éœ€æ›´æ–°åº”ç”¨ä¿¡æ¯ï¼Œç¼–è¾‘ `version.py` ä¸­çš„ `APP_INFO`ï¼š

```python
APP_INFO = {
    "name": "Pythonè„šæœ¬æ‰¹é‡æ‰§è¡Œå·¥å…·",
    "name_en": "Python Script Batch Executor",
    "description": "ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Pythonè„šæœ¬æ‰¹é‡æ‰§è¡Œå’Œç®¡ç†å·¥å…·",
    "author": "Your Name",
    "author_email": "your.email@example.com",
    "homepage": "https://github.com/yourusername/script-executor",
    # ...
}
```

---

## 2. æœ¬åœ°æ‰“åŒ…

### 2.1 ç¯å¢ƒå‡†å¤‡

```bash
# ç¡®ä¿ä½¿ç”¨Python 3.8+
python --version

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…PyInstaller
pip install pyinstaller
```

### 2.2 Windowsæ‰“åŒ…

```bash
# ä½¿ç”¨specæ–‡ä»¶æ‰“åŒ…
pyinstaller build.spec

# æ‰“åŒ…ç»“æœåœ¨ dist/PythonScriptBatchExecutor ç›®å½•
```

### 2.3 Linuxæ‰“åŒ…

```bash
# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt-get install -y libxcb-xinerama0 libxcb-cursor0

# æ‰“åŒ…
pyinstaller build.spec

# åˆ›å»ºå‹ç¼©åŒ…
cd dist
tar -czf PythonScriptBatchExecutor-Linux.tar.gz PythonScriptBatchExecutor
```

### 2.4 macOSæ‰“åŒ…

```bash
# æ‰“åŒ…
pyinstaller build.spec

# åˆ›å»ºå‹ç¼©åŒ…
cd dist
tar -czf PythonScriptBatchExecutor-macOS.tar.gz PythonScriptBatchExecutor.app
```

### 2.5 æµ‹è¯•æ‰“åŒ…ç»“æœ

```bash
# Windows
cd dist/PythonScriptBatchExecutor
PythonScriptBatchExecutor.exe

# Linux/macOS
cd dist/PythonScriptBatchExecutor
./PythonScriptBatchExecutor
```

---

## 3. è‡ªåŠ¨å‘å¸ƒæµç¨‹ï¼ˆæ¨èï¼‰

### 3.1 é…ç½®GitHubä»“åº“

1. å°†ä»£ç æ¨é€åˆ°GitHub
2. ç¡®ä¿ `.github/workflows/release.yml` æ–‡ä»¶å­˜åœ¨

### 3.2 åˆ›å»ºå‘å¸ƒ

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆç¼–è¾‘ version.pyï¼‰

# 2. æäº¤æ›´æ”¹
git add .
git commit -m "chore: bump version to 1.1.0"

# 3. åˆ›å»ºæ ‡ç­¾
git tag -a v1.1.0 -m "Release version 1.1.0"

# 4. æ¨é€æ ‡ç­¾ï¼ˆè§¦å‘è‡ªåŠ¨æ„å»ºï¼‰
git push origin v1.1.0
```

### 3.3 è‡ªåŠ¨æ„å»ºæµç¨‹

æ¨é€æ ‡ç­¾åï¼ŒGitHub Actionsä¼šè‡ªåŠ¨ï¼š

1. âœ… åœ¨Windowsã€Linuxã€macOSä¸Šæ„å»ºåº”ç”¨
2. âœ… åˆ›å»ºå‹ç¼©åŒ…
3. âœ… åˆ›å»ºGitHub Release
4. âœ… ä¸Šä¼ æ‰€æœ‰å¹³å°çš„å®‰è£…åŒ…

### 3.4 æŸ¥çœ‹æ„å»ºçŠ¶æ€

è®¿é—®ï¼š`https://github.com/yourusername/script-executor/actions`

---

## 4. æ‰‹åŠ¨å‘å¸ƒæµç¨‹

### 4.1 æœ¬åœ°æ„å»ºæ‰€æœ‰å¹³å°

å¦‚æœæ— æ³•ä½¿ç”¨GitHub Actionsï¼Œå¯ä»¥æ‰‹åŠ¨æ„å»ºï¼š

```bash
# åœ¨å„ä¸ªå¹³å°ä¸Šåˆ†åˆ«æ‰§è¡Œ
pyinstaller build.spec

# åˆ›å»ºå‹ç¼©åŒ…
# Windows: ä½¿ç”¨7-Zipæˆ–WinRAR
# Linux/macOS: tar -czf
```

### 4.2 åˆ›å»ºGitHub Release

1. è®¿é—®ï¼š`https://github.com/yourusername/script-executor/releases/new`
2. å¡«å†™ä¿¡æ¯ï¼š
   - Tag version: `v1.1.0`
   - Release title: `Release 1.1.0`
   - Description: æ›´æ–°è¯´æ˜
3. ä¸Šä¼ æ–‡ä»¶ï¼š
   - `PythonScriptBatchExecutor-Windows.zip`
   - `PythonScriptBatchExecutor-Linux.tar.gz`
   - `PythonScriptBatchExecutor-macOS.tar.gz`
4. ç‚¹å‡» "Publish release"

---

## 5. æ›´æ–°æ£€æŸ¥é…ç½®

### 5.1 é…ç½®GitHub API

ç¼–è¾‘ `version.py` ä¸­çš„ `UPDATE_CONFIG`ï¼š

```python
UPDATE_CONFIG = {
    # æ›¿æ¢ä¸ºä½ çš„GitHubä»“åº“
    "github_api": "https://api.github.com/repos/yourusername/script-executor/releases/latest",
    
    # æ›´æ–°æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
    "check_interval": 86400,  # 24å°æ—¶
    
    # æ˜¯å¦è‡ªåŠ¨æ£€æŸ¥æ›´æ–°
    "auto_check": True,
    
    # æ˜¯å¦æ˜¾ç¤ºé¢„å‘å¸ƒç‰ˆæœ¬
    "show_prerelease": False,
}
```

### 5.2 åœ¨ä¸»çª—å£ä¸­é›†æˆæ›´æ–°æ£€æŸ¥

ç¼–è¾‘ `AppCode/ui/main_window.py`ï¼Œæ·»åŠ æ›´æ–°æ£€æŸ¥ï¼š

```python
from AppCode.ui.update_dialog import show_update_dialog

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        # ... å…¶ä»–åˆå§‹åŒ–ä»£ç 
        
        # å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–°
        self.check_updates_on_startup()
    
    def check_updates_on_startup(self):
        """å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–°"""
        try:
            # å»¶è¿Ÿ3ç§’åæ£€æŸ¥ï¼Œé¿å…å½±å“å¯åŠ¨é€Ÿåº¦
            QTimer.singleShot(3000, lambda: show_update_dialog(self, force_check=False))
        except Exception as e:
            self.logger.error(f"æ£€æŸ¥æ›´æ–°å¤±è´¥: {e}")
    
    def on_check_updates_clicked(self):
        """æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°"""
        show_update_dialog(self, force_check=True)
```

### 5.3 æ·»åŠ èœå•é¡¹

```python
def create_menu_bar(self):
    menubar = self.menuBar()
    
    # å¸®åŠ©èœå•
    help_menu = menubar.addMenu("å¸®åŠ©(&H)")
    
    # æ£€æŸ¥æ›´æ–°
    check_update_action = QAction("æ£€æŸ¥æ›´æ–°", self)
    check_update_action.triggered.connect(self.on_check_updates_clicked)
    help_menu.addAction(check_update_action)
    
    # å…³äº
    about_action = QAction("å…³äº", self)
    about_action.triggered.connect(self.show_about_dialog)
    help_menu.addAction(about_action)
```

---

## 6. å¸¸è§é—®é¢˜

### 6.1 æ‰“åŒ…åæ— æ³•è¿è¡Œ

**é—®é¢˜**ï¼šåŒå‡»exeæ–‡ä»¶æ²¡æœ‰ååº”

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥æ˜¯å¦ç¼ºå°‘ä¾èµ–
3. ç¡®ä¿ `build.spec` ä¸­åŒ…å«æ‰€æœ‰å¿…è¦çš„æ•°æ®æ–‡ä»¶

### 6.2 æ›´æ–°æ£€æŸ¥å¤±è´¥

**é—®é¢˜**ï¼šæ— æ³•è¿æ¥åˆ°GitHub API

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤GitHubä»“åº“åœ°å€æ­£ç¡®
3. æ£€æŸ¥æ˜¯å¦è¢«é˜²ç«å¢™æ‹¦æˆª
4. è€ƒè™‘ä½¿ç”¨ä»£ç†æˆ–é•œåƒ

### 6.3 GitHub Actionsæ„å»ºå¤±è´¥

**é—®é¢˜**ï¼šè‡ªåŠ¨æ„å»ºå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æŸ¥çœ‹Actionsæ—¥å¿—
2. æ£€æŸ¥ `requirements.txt` æ˜¯å¦å®Œæ•´
3. ç¡®è®¤æ‰€æœ‰å¹³å°çš„ä¾èµ–éƒ½å·²å®‰è£…
4. æ£€æŸ¥Pythonç‰ˆæœ¬å…¼å®¹æ€§

### 6.4 æ‰“åŒ…ä½“ç§¯è¿‡å¤§

**é—®é¢˜**ï¼šæ‰“åŒ…åæ–‡ä»¶å¤ªå¤§

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨ `build.spec` ä¸­æ·»åŠ æ›´å¤šæ’é™¤é¡¹
2. ä½¿ç”¨UPXå‹ç¼©
3. ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–

```python
# build.spec
excludes = [
    'matplotlib',
    'numpy',
    'pandas',
    'scipy',
    'PIL',
    'tkinter',
    # æ·»åŠ æ›´å¤šä¸éœ€è¦çš„æ¨¡å—
]
```

### 6.5 ç‰ˆæœ¬å·ä¸æ›´æ–°

**é—®é¢˜**ï¼šåº”ç”¨æ˜¾ç¤ºçš„ç‰ˆæœ¬å·ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ `version.py` å·²æ›´æ–°
2. é‡æ–°æ‰“åŒ…
3. æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶ï¼š`rm -rf build dist`

---

## 7. å‘å¸ƒæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰è¯·ç¡®è®¤ï¼š

- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°ï¼ˆ`version.py`ï¼‰
- [ ] æ›´æ–°æ—¥å¿—å·²ç¼–å†™ï¼ˆ`CHANGELOG.md`ï¼‰
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] GitHubä»“åº“åœ°å€å·²é…ç½®
- [ ] æœ¬åœ°æ‰“åŒ…æµ‹è¯•é€šè¿‡
- [ ] æ›´æ–°æ£€æŸ¥åŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰å¹³å°çš„å®‰è£…åŒ…å·²å‡†å¤‡

---

## 8. å‘å¸ƒåæ“ä½œ

### 8.1 é€šçŸ¥ç”¨æˆ·

- åœ¨GitHub Releaseä¸­å‘å¸ƒå…¬å‘Š
- æ›´æ–°README.mdä¸­çš„ä¸‹è½½é“¾æ¥
- åœ¨é¡¹ç›®ä¸»é¡µæ›´æ–°ç‰ˆæœ¬ä¿¡æ¯

### 8.2 ç›‘æ§åé¦ˆ

- å…³æ³¨GitHub Issues
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- è®°å½•å¸¸è§é—®é¢˜

### 8.3 å‡†å¤‡ä¸‹ä¸€ç‰ˆæœ¬

- åˆ›å»ºæ–°çš„å¼€å‘åˆ†æ”¯
- è§„åˆ’ä¸‹ä¸€ç‰ˆæœ¬åŠŸèƒ½
- æ›´æ–°å¼€å‘è·¯çº¿å›¾

---

## 9. å¿«é€Ÿå‘å¸ƒå‘½ä»¤

```bash
#!/bin/bash
# release.sh - å¿«é€Ÿå‘å¸ƒè„šæœ¬

VERSION=$1

if [ -z "$VERSION" ]; then
    echo "Usage: ./release.sh <version>"
    echo "Example: ./release.sh 1.1.0"
    exit 1
fi

echo "ğŸš€ å¼€å§‹å‘å¸ƒç‰ˆæœ¬ $VERSION"

# 1. æ›´æ–°ç‰ˆæœ¬å·
echo "ğŸ“ æ›´æ–°ç‰ˆæœ¬å·..."
# è¿™é‡Œéœ€è¦æ‰‹åŠ¨ç¼–è¾‘ version.py

# 2. æäº¤æ›´æ”¹
echo "ğŸ’¾ æäº¤æ›´æ”¹..."
git add .
git commit -m "chore: bump version to $VERSION"

# 3. åˆ›å»ºæ ‡ç­¾
echo "ğŸ·ï¸  åˆ›å»ºæ ‡ç­¾..."
git tag -a "v$VERSION" -m "Release version $VERSION"

# 4. æ¨é€
echo "ğŸ“¤ æ¨é€åˆ°è¿œç¨‹..."
git push origin main
git push origin "v$VERSION"

echo "âœ… å‘å¸ƒå®Œæˆï¼"
echo "ğŸ“¦ GitHub Actions æ­£åœ¨æ„å»º..."
echo "ğŸ”— æŸ¥çœ‹è¿›åº¦: https://github.com/yourusername/script-executor/actions"
```

ä½¿ç”¨æ–¹æ³•ï¼š

```bash
chmod +x release.sh
./release.sh 1.1.0
```

---

## 10. è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š

- ğŸ“§ Email: your.email@example.com
- ğŸ› Issues: https://github.com/YWB9806/OBC-DCDC-AutoTest/issues
- ğŸ“– æ–‡æ¡£: https://github.com/YWB9806/OBC-DCDC-AutoTest/wiki

---

**æœ€åæ›´æ–°**: 2025-12-13